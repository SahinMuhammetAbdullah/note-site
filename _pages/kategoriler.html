---
layout: default
title: Kategoriler
permalink: /kategoriler/
---

<div class="container main-content">
    <h1 class="section-title">KATEGORİLER</h1>
    <p class="hero-p">Tüm konulara ve derslere buradan ulaşın.</p>

    {% comment %}
    1) Tüm postlardan ana kategorileri (ilk eleman) çıkar
    {% endcomment %}
    {% assign parent_categories = "" | split: "," %}

    {% for post in site.posts %}
        {% assign cats = post.categories %}
        {% if cats.size > 0 %}
            {% assign parent = cats[0] %}
            {% unless parent_categories contains parent %}
                {% assign parent_categories = parent_categories | push: parent %}
            {% endunless %}
        {% endif %}
    {% endfor %}

    {% assign parent_categories = parent_categories | sort %}

    {% comment %}
    ────────────────────────────────────────────────
    HER ANA KATEGORİ İÇİN ALT KATEGORİLERE AYIR
    ────────────────────────────────────────────────
    {% endcomment %}

    {% for parent in parent_categories %}
        <details class="category-dropdown">
            <summary class="category-summary">
                <i class="fas fa-folder"></i> {{ parent }}
            </summary>

            {% comment %}
            Bu ana kategori altındaki tüm postlar
            {% endcomment %}
            {% assign posts_in_parent = site.posts | where_exp: "p", "p.categories.size > 0 and p.categories[0] == parent" %}

            {% comment %}
            Bu postların alt kategorilerini çıkar (2. eleman)
            {% endcomment %}
            {% assign child_categories = "" | split: "," %}

            {% for p in posts_in_parent %}
                {% if p.categories.size > 1 %}
                    {% assign child = p.categories[1] %}
                    {% unless child_categories contains child %}
                        {% assign child_categories = child_categories | push: child %}
                    {% endunless %}
                {% endif %}
            {% endfor %}

            {% assign child_categories = child_categories | sort %}

            <ul class="category-post-list">

                {% comment %}
                ── 1) ALT KATEGORİLİ POSTLARI LİSTELE ─────────────────────
                {% endcomment %}
                {% for child in child_categories %}
                    <li class="subcategory-wrapper">
                        <details class="child-category-dropdown">
                            <summary class="child-category-summary">
                                <i class="fas fa-file-alt"></i> <strong>{{ child }}</strong>
                            </summary>

                            <ul class="child-post-list">
                                {% assign posts_in_child = posts_in_parent | where_exp: "p", "p.categories[1] == child" %}

                                {% for post in posts_in_child %}
                                    <li class="category-post-item">
                                        <a href="{{ post.url | relative_url }}" class="category-post-link">
                                            <span class="post-title-small">{{ post.title }}</span>
                                            <span class="post-date-small">{{ post.date | date: "%d %b %Y" }}</span>
                                        </a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </details>
                    </li>
                {% endfor %}

                {% comment %}
                ── 2) ALT KATEGORİSİ OLMAYAN (SADECE ANA KAT. OLAN POSTLAR) ─────────────────────
                {% endcomment %}
                {% assign no_child_posts = posts_in_parent | where_exp: "p", "p.categories.size == 1" %}

                {% if no_child_posts.size > 0 %}
                    <li class="subcategory-wrapper">
                        <details class="child-category-dropdown">
                            <summary class="child-category-summary">
                                <i class="fas fa-file-alt"></i>
                                <strong>Genel</strong>
                            </summary>
                            
                            <ul class="child-post-list">
                                {% for post in no_child_posts %}
                                    <li class="category-post-item">
                                        <a href="{{ post.url | relative_url }}" class="category-post-link">
                                            <span class="post-title-small">{{ post.title }}</span>
                                            <span class="post-date-small">{{ post.date | date: "%d %b %Y" }}</span>
                                        </a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </details>
                    </li>
                {% endif %}
            </ul>
        </details>
    {% endfor %}
</div>
